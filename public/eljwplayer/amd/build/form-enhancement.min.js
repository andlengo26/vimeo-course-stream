define(["jquery","core/str"],function($,str){"use strict";function init(){setupVimeoUrlManager();setupConditionalFields()}function setupVimeoUrlManager(){var container=$("#vimeo-urls-container");if(container.length===0){return}var textarea=$('textarea[name="vimeo_urls"]');if(textarea.length===0){return}var addButton=$('<button type="button" class="btn btn-secondary" style="margin-top: 5px;"><i class="fa fa-plus"></i> Add URL</button>');var urlInputsContainer=$('<div id="vimeo-url-inputs" style="margin-bottom: 10px;"></div>');textarea.before(urlInputsContainer);textarea.after(addButton);var existingUrls=textarea.val().trim();if(existingUrls){var urls=existingUrls.split('\n').filter(function(url){return url.trim().length>0});urls.forEach(function(url){addUrlInput(urlInputsContainer,url.trim())})}else{addUrlInput(urlInputsContainer,'')}textarea.hide();addButton.on('click',function(){addUrlInput(urlInputsContainer,'');updateTextarea()});urlInputsContainer.on('input','input[type="url"]',function(){updateTextarea()});urlInputsContainer.on('click','.remove-url',function(){$(this).closest('.vimeo-url-input').remove();updateTextarea();if(urlInputsContainer.find('.vimeo-url-input').length===0){addUrlInput(urlInputsContainer,'')}});function addUrlInput(container,value){var inputGroup=$('<div class="vimeo-url-input" style="display: flex; margin-bottom: 5px; align-items: center;">');var input=$('<input type="url" class="form-control" placeholder="https://vimeo.com/123456789" style="margin-right: 10px;" value="'+(value||'')+'">');var removeBtn=$('<button type="button" class="btn btn-danger btn-sm remove-url"><i class="fa fa-minus"></i></button>');inputGroup.append(input).append(removeBtn);container.append(inputGroup);if(!value){input.focus()}}function updateTextarea(){var urls=[];urlInputsContainer.find('input[type="url"]').each(function(){var url=$(this).val().trim();if(url){urls.push(url)}});textarea.val(urls.join('\n'))}}function setupConditionalFields(){var videoSourceSelect=$('select[name="videosource"]');if(videoSourceSelect.length===0){return}function toggleFields(){var source=videoSourceSelect.val();var jwplayerFields=$('#fgroup_id_jwplayersettings, input[name="media_id"], input[name="playlist_id"]').closest('.fitem');if(source==='jwplayer'){jwplayerFields.show()}else{jwplayerFields.hide()}var vimeoFields=$('#fgroup_id_vimeosettings, #vimeo-urls-container, input[name="video_url"]').closest('.fitem');if(source==='vimeo'){vimeoFields.show()}else{vimeoFields.hide()}}toggleFields();videoSourceSelect.on('change',toggleFields)}return{init:init}});