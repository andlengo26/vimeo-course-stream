define(["exports","core/ajax","core/notification"],function(a,b,c){"use strict";var d={config:null,init:function(a){this.config=a,this.findRootContainer()&&(this.loadReactApp(a),this.setupCompletionTracking(a))},findRootContainer:function(){return document.getElementById("vimeo-playlist-root")},loadReactApp:function(a){var b=this,c=document.createElement("script");c.src="./react-app/assets/index.js",c.onload=function(){b.initializeApp(a)},c.onerror=function(){console.error("Failed to load React app")},document.head.appendChild(c)},initializeApp:function(a){window.MoodleConfig={activityId:parseInt(a.cmid),userId:parseInt(a.userid),courseId:parseInt(a.courseid),vimeoUrls:a.vimeo_urls||[],autoplay:!!a.autoplay,continuousPlay:!!a.continuousplay,showEndScreen:!!a.showendscreen},window.dispatchEvent(new CustomEvent("moodle-config-ready"))},setupCompletionTracking:function(a){var d=this;window.addEventListener("vimeo-completion",function(e){d.trackCompletion(a.cmid,e.detail)}),window.addEventListener("vimeo-progress",function(e){d.trackProgress(a.cmid,e.detail)})},trackCompletion:function(a,d){b.call([{methodname:"mod_eljwplayer_track_completion",args:{cmid:parseInt(a),videoid:d.videoid||"",completed:d.completed?1:0},done:function(a){console.log("Completion tracked:",a)},fail:function(a){console.error("Failed to track completion:",a)}}])},trackProgress:function(a,d){b.call([{methodname:"mod_eljwplayer_track_progress",args:{cmid:parseInt(a),videoid:d.videoid||"",progress:d.progress||0},done:function(a){console.log("Progress tracked:",a)},fail:function(a){console.error("Failed to track progress:",a)}}])}};a.init=function(a){d.init(a)},Object.defineProperty(a,"__esModule",{value:!0})});